<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>파이썬에서 파일 다루기 | HOME</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="파이썬에서 파일 다루기" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="파이썬에서 파일을 읽고 쓰는건 간단한 일인데 어떤 모드를 사용할지 자꾸 헷갈리기도 하고 잘 정리한 블로그가 있어 소개하려고 한다." />
<meta property="og:description" content="파이썬에서 파일을 읽고 쓰는건 간단한 일인데 어떤 모드를 사용할지 자꾸 헷갈리기도 하고 잘 정리한 블로그가 있어 소개하려고 한다." />
<link rel="canonical" href="/2018-09-01/%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9C%BC%EB%A1%9C-%ED%8C%8C%EC%9D%BC-%EB%8B%A4%EB%A3%A8%EA%B8%B0" />
<meta property="og:url" content="/2018-09-01/%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9C%BC%EB%A1%9C-%ED%8C%8C%EC%9D%BC-%EB%8B%A4%EB%A3%A8%EA%B8%B0" />
<meta property="og:site_name" content="HOME" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-01T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"파이썬에서 파일을 읽고 쓰는건 간단한 일인데 어떤 모드를 사용할지 자꾸 헷갈리기도 하고 잘 정리한 블로그가 있어 소개하려고 한다.","@type":"BlogPosting","url":"/2018-09-01/%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9C%BC%EB%A1%9C-%ED%8C%8C%EC%9D%BC-%EB%8B%A4%EB%A3%A8%EA%B8%B0","headline":"파이썬에서 파일 다루기","dateModified":"2018-09-01T00:00:00+00:00","datePublished":"2018-09-01T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018-09-01/%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9C%BC%EB%A1%9C-%ED%8C%8C%EC%9D%BC-%EB%8B%A4%EB%A3%A8%EA%B8%B0"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="HOME" />

  <!-- Google Analytics-->
  
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">HOME</h2>
    </a>
    <ul>
      <li><a href="/post/">POSTS</a></li>
      <li><a href="/record/">RECORDS</a></li>
      <li><a href="/tis/">TIS</a></li>
      <li><a href="/about">ABOUT</a></li>
    </ul>
  </div>
</nav>

    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2018-09-01 00:00:00 +0000">September 01, 2018</time>
    
  </div>

  <h1 class="post-title">파이썬에서 파일 다루기</h1>
  <div class="post-line"></div>

  <p>주로 장고로 웹서버만 만드는 것만 하다보니 파일을 읽고 쓰는 python기능을 자주 쓸 일이 없었다. 그런데 실제로 일을 시작하니 간혹 사용 할 일이 있더라….</p>

<p>읽고 쓰는건 간단한 일인데 모드가 자꾸 기억나지 않아서 쓸 때마다 구글을 검색해야 하는 번잡함을 피하고자 블로그에 기록해놓으려고 한다.</p>

<p>일단 이와 관련해서 한글로 너무나 잘 정리 된 글이 있어서 소개한다. - <a href="http://thrillfighter.tistory.com/310">http://thrillfighter.tistory.com/310</a></p>

<p>그리고 파이썬 공식문서의 open 메소드 설명 - <a href="https://docs.python.org/3/library/functions.html#open">https://docs.python.org/3/library/functions.html#open</a></p>

<p>파일을 여는데에는 여러가지 모드와 옵션이 존재한다. 여기서는 여러가지 <code class="highlighter-rouge">모드</code>와 <code class="highlighter-rouge">옵션</code>을 정리한다. (왜냐면 내가 필요하니까)</p>

<p>open 메소드는 아래와 같이 사용된다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file_object</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="p">[</span><span class="n">access_mode</span><span class="p">],</span> <span class="p">[</span><span class="n">buffering</span><span class="p">])</span>
</code></pre></div></div>

<p>(출처 <a href="https://www.tutorialspoint.com/python/python_files_io.htm">tutorialpoint</a>)</p>

<p>아래는 사용할 수 있는 모드의 종류다.</p>

<p>파이썬의 모드는 C언어의 standard library function인 <code class="highlighter-rouge">fopen()</code>과 같다. 따라서 해당 내용을 참고한다면 좀더 풍부하게 python의 <code class="highlighter-rouge">open()</code>을 사용할 수 있을 것 같다. 예를 들어 파이썬 공식 문서에도 <code class="highlighter-rouge">r+</code>나 <code class="highlighter-rouge">w+</code>와 같이 ‘+’를 사용하는 것을 상세하게 소개하진 않는다.(내가 그렇게 느낀다… 물론 내가 영어를 잘 못알아 먹은 경우의 수도 있다.)</p>

<h3 id="모드">모드</h3>

<table>
  <thead>
    <tr>
      <th>Character</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">'r'</code></td>
      <td>open for reading (default) / 파일이 없을 경우 에러</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'w'</code></td>
      <td>open for writing, truncating the file first / 파일이 없으면 새로 만든다.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'x'</code></td>
      <td>open for exclusive creation, failing if the file already exists</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'a'</code></td>
      <td>open for writing, appending to the end of the file if it exists</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'U'</code></td>
      <td><a href="https://docs.python.org/3/glossary.html#term-universal-newlines">universal newlines</a> mode (deprecated)</td>
    </tr>
  </tbody>
</table>

<h3 id="옵션">옵션</h3>

<table>
  <thead>
    <tr>
      <th>Character</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">'b'</code></td>
      <td>binary mode</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'t'</code></td>
      <td>text mode (default)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'+'</code></td>
      <td>open a disk file for updating (reading and writing)</td>
    </tr>
  </tbody>
</table>

<h3 id="예시">예시</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 쓰기모드 + 텍스트옵션</span>
<span class="n">write_text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">txt</span><span class="p">,</span> <span class="n">wt</span><span class="p">)</span>

<span class="c"># 읽기모드 + 바이너리옵션</span>
<span class="n">read_binary</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">txt</span><span class="p">,</span> <span class="n">rt</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="w-r-a의-차이점"><code class="highlighter-rouge">w+</code>, <code class="highlighter-rouge">r+</code>, <code class="highlighter-rouge">a+</code>의 차이점</h3>

<table>
  <thead>
    <tr>
      <th>모드</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>w+</td>
      <td>기존 파일에 있던 데이터를 완전히 지우고 새로 작성</td>
    </tr>
    <tr>
      <td>r+</td>
      <td>기존 파일에 있던 데이터 위에 덮어씌움 (파일이 없으면 에러를 뿜는다)</td>
    </tr>
    <tr>
      <td>a+</td>
      <td>기존 파일 가장 뒷자리부터 작성</td>
    </tr>
  </tbody>
</table>

<p>ex) 기존 파일에 “hello world”라는 내용이 있고 “aa”를 입력하는 경우 각 모드별 차이</p>

<table>
  <thead>
    <tr>
      <th>모드</th>
      <th>결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>w+</td>
      <td>“aa”</td>
    </tr>
    <tr>
      <td>r+</td>
      <td>“aallo world”</td>
    </tr>
    <tr>
      <td>a+</td>
      <td>“hello world”</td>
    </tr>
  </tbody>
</table>

<h3 id="마지막으로-open-메서드에-나오는-buffering에-대하여">마지막으로 open 메서드에 나오는 buffering에 대하여</h3>

<p>버퍼는 메모리라고 생각하면 되는데, 간단히 말해 os가 제공해 주는 인터페이스를 통해 파일을 읽어오는게 아니라 메모리에 올려서 읽어오는 것을 말한다. open메서드에서 buffering을 설정 하는 것은 메모리에 얼마만큼의 단위로 올려서 가져올지 정하는 것 이다. (사실 나도 개념적으로만 이해하고 있지 실제로 잘 사용해보지는 않았다.)</p>

<p>스택오버플로우의 답변에 의하면 os시스템을 통해서 raw stream으로 가져오는 것 보다 메모리에 올려 파일을 읽어오는 것이 더 빠르다고 한다.. (os 시스템에서 raw stream으로 가져오는 것은 대기 시간이 길다고 함) 아마 설정한 buffer chunk 단위로 메모리에 미리 올려 놓기 때문에 더 빠른 것 같다.</p>

<p>출처 : <a href="https://docs.python.org/3/library/functions.html#open">파이썬 공식문서</a>, <a href="http://thrillfighter.tistory.com/310">블로그</a>, <a href="https://stackoverflow.com/questions/29712445/what-is-the-use-of-buffering-in-pythons-built-in-open-function">stackoverflow</a></p>


</div>

<div class="pagination">
  
    <a href="/2018-10-06/Docker-RUN,-CMD-ENTRYPOINT" class="left arrow">&#8592;</a>
  
  
    <a href="/2018-03-24/%EC%83%9D%ED%99%9C%EC%BD%94%EB%94%A9web3-Ajax" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>

    </main>

    <footer>
  <span>
    &copy; <time datetime="2020-02-25 22:41:48 +0000">2020</time> . Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
