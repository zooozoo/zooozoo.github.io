<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Postgresql | HOME</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Postgresql" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="명령어 기록 (ubuntu-1604)" />
<meta property="og:description" content="명령어 기록 (ubuntu-1604)" />
<link rel="canonical" href="/2017-10-15/postgresql" />
<meta property="og:url" content="/2017-10-15/postgresql" />
<meta property="og:site_name" content="HOME" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-10-15T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"명령어 기록 (ubuntu-1604)","@type":"BlogPosting","url":"/2017-10-15/postgresql","headline":"Postgresql","dateModified":"2017-10-15T00:00:00+00:00","datePublished":"2017-10-15T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2017-10-15/postgresql"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="HOME" />

  <!-- Google Analytics-->
  
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">HOME</h2>
    </a>
    <ul>
      <li><a href="/post/">POSTS</a></li>
      <li><a href="/record/">RECORDS</a></li>
      <li><a href="/tis/">TIS</a></li>
      <li><a href="/about">ABOUT</a></li>
    </ul>
  </div>
</nav>

    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2017-10-15 00:00:00 +0000">October 15, 2017</time>
    
  </div>

  <h1 class="post-title">Postgresql</h1>
  <div class="post-line"></div>

  <h1 id="명령어-기록-ubuntu-1604">명령어 기록 (ubuntu-1604)</h1>

<h2 id="데이터베이스-생성">데이터베이스 생성</h2>
<p>커맨드창 에서 ‘zoozoo’라는 계정 이름으로 <code class="highlighter-rouge">testname</code>이라는 데이터베이스를 생성</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>createdb testname --owner=zoozoo
</code></pre></div></div>
<p>데이터베이스 접속 후 위와 같은 데이터베이스 생성</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE DATABASE testname OWNER zoozoo;
</code></pre></div></div>
<p>데이터베이스 이름이 대문자인 경우 <code class="highlighter-rouge">""</code>(쌍따옴표)로 데이터베이스 이름을 감싸서 명령을 실행시켜야 실행이 된다.</p>

<h2 id="기본생성된-사용자-이름으로-postgresql연결">기본생성된 사용자 이름으로 postgresql연결</h2>

<p>postgres 사용자로 psql을 실행하고 postgres 데이터베이스에 연결한다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo -u postgres psql
</code></pre></div></div>

<h2 id="postgres-사용자로-다른-데이터베이스-연결">postgres 사용자로 다른 데이터베이스 연결</h2>

<p>postgres 사용자로 psql을 실행하고 testdb 데이터베이스에 연결한다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo -u postgres psql testdb
</code></pre></div></div>

<h2 id="데이터베이스-삭제터미널-창에서">데이터베이스 삭제(터미널 창에서)</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo -u postgres dropdb &lt;name&gt;
</code></pre></div></div>
<p>데이터베이스 접속 후 위와 같은 데이터베이스 삭제</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DROP DATABASE &lt;name&gt;
</code></pre></div></div>

<h2 id="데이터베이스-목록확인-데이터베이스-명령어">데이터베이스 목록확인 (데이터베이스 명령어)</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\ㅣ
</code></pre></div></div>

<h2 id="특정-데이터베이스에-접속">특정 데이터베이스에 접속</h2>
<p>ex) database명 instagram</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>psql instagram
</code></pre></div></div>

<h2 id="위의-특정-데이터베이스에-접속-후-관련-테이블-확인">위의 특정 데이터베이스에 접속 후 관련 테이블 확인</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dt\
</code></pre></div></div>

<h2 id="테이블의-전체-내용-확인">테이블의 전체 내용 확인</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>select * from 테이블명
</code></pre></div></div>

<h2 id="사용자-비밀번호-변경하기">사용자 비밀번호 변경하기</h2>

<ol>
  <li><code class="highlighter-rouge">sudo -u postgres psql template1</code> 명령을 통해 데이터베이스 접속</li>
  <li><code class="highlighter-rouge">ALTER USER postgres with encrypted password 'your_password';</code> 명령을 통해 패스워드 변경 아래는 예시
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ALTER USER James with encrypted password 'asldkhf';
</code></pre></div>    </div>
  </li>
  <li><code class="highlighter-rouge">sudo systemctl restart postgresql.service</code>명령을 통해 postgresql 재시작</li>
</ol>

<h2 id="사용자-추가">사용자 추가</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE USER example WITH PASSWORD 'tiger';
</code></pre></div></div>

<h2 id="사용자-확인">사용자 확인</h2>
<ol>
  <li><code class="highlighter-rouge">sudo -u postgres psql</code>로 데이터베이스 접속</li>
  <li><code class="highlighter-rouge">select * from pg_shadow</code> 또는 <code class="highlighter-rouge">select * from pg_user</code>로 확인가능</li>
</ol>

<p><code class="highlighter-rouge">select * from pg_shadow</code>는 password를 포함하기 때문에 외부접근 불가능.</p>

<p><a href="https://www.postgresql.org/docs/9.1/static/view-pg-shadow.html">아래는 문서의 설명</a></p>
<blockquote>
  <p>The view pg_shadow exists for backwards compatibility: it emulates a catalog that existed in PostgreSQL before version 8.1. It shows properties of all roles that are marked as rolcanlogin in pg_authid.
The name stems from the fact that this table should not be readable by the public since it contains passwords. pg_user is a publicly readable view on pg_shadow that blanks out the password field.</p>
</blockquote>

<h2 id="아마존-웹서비스-연결할-때">아마존 웹서비스 연결할 때</h2>
<p><code class="highlighter-rouge">psql --host=RDS서버 인스턴스를 만든 후 생성되는 url --user=유저이름 --port=5432 데이터베이스이름</code></p>


</div>

<div class="pagination">
  
    <a href="/2017-11-16/docker%EA%B4%80%EB%A0%A8" class="left arrow">&#8592;</a>
  
  
    <a href="/2017-10-14/dajngo_querySet_method" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>

    </main>

    <footer>
  <span>
    &copy; <time datetime="2020-02-25 22:41:48 +0000">2020</time> . Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
